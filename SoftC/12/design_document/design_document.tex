\documentclass[a4j]{jarticle}

\makeatletter
\def\figcaption{\def\@captype{table}\caption}
\makeatother

\setlength{\oddsidemargin}{-1in}
\addtolength{\oddsidemargin}{20mm}
\setlength{\textwidth}{170mm}
\pagestyle{empty}

\usepackage{multicol}
\usepackage{lscape}
\usepackage[dvips]{graphicx}
\usepackage{verbatim}

\begin{document}
\huge
\noindent
\begin{center}
%表紙↓
\vspace{2cm}
\textgt{設計書}\\
\vspace{2cm}
\today
\end{center}

\vspace{5cm}\begin{center}
\LARGE 学籍番号：0312010142\\
\LARGE \hspace{-1.1cm}講座名　：澤本研\\
\LARGE \hspace{-0.48cm}氏名　　：藤田　拓\\
\end{center}
%表紙↑
\newpage
\normalsize
\tableofcontents

\newpage

\section{概要}

本アプリケーションはユーザが住所録の管理を行うためのものである。本アプリケーションを用いることで、ユーザは氏名、郵便番号、住所、電話番号、メールアドレスの5項目からなる住所録を管理することができる。

1つのファイルは氏名、郵便番号、住所、電話番号、メールアドレスで構成される。それぞれの項目はユーザが任意に設定し、登録することができる。

本アプリケーションの主な機能を以下に示す。

\begin{enumerate}
\item{新規住所録の登録}
\item{既存住所録の参照}
\item{既存住所録の削除}
\item{任意の住所録項目に対しての修正}
\item{一覧表示と任意の項目に対しての昇順・降順ソート}
\end{enumerate}

\newpage

\section{全体構成と構成要素に関する各々の説明}

ここでは本アプリケーションの全体構成と構成要素に関する各々の説明を示す。本アプリケーションは、大きく分けて4つの部分からなる。メインルーチン、住所録登録部、住所録操作部、自動実行部である。メインルーチンはアプリケーションの核となる部分で、他の3つの部分とつながり、管理する部分である。住所録登録部は、新規住所録の追加という要素からなる部分である。

新規住所録の追加は後述するadd\_adrb関数、add\_node関数、create\_adrb関数、create\_node関数によって構成される。

住所録操作部は、既存の住所録の参照、修正、削除という要素と、住所録一覧表示(昇順・降順)という要素からなる。

既存の住所録の参照は後述されるreference\_adrb関数、search\_adrb関数の二つによって構成されている。既存住所録の削除は同様に後述されるdelete\_adrb関数、delete\_min関数によって構成される。既存住所録の修正は同じように後述のfix\_adrb関数、fix\_item関数、search\_adrb関数の三つによって構成される。住所録の一覧表示はlist\_adrb関数、up\_print関数、down\_print関数、print\_adrb関数によって構成されている。

自動実行部は住所録のファイルからの読込、保存、履歴表示という要素からなる。読込はmake\_tree関数とadd\_node関数、create\_node関数、create\_adrb関数によって構成される。保存はsave\_file関数によって構成されている。履歴表示はprint\_history関数によって構成される。

本アプリケーションを構成する要素と、構成要素間の関連をまとめた図を以下に示す。

\begin{figure}[h]
\begin{center}
\scalebox{.495}[.495]{\includegraphics{design_document.eps}}
\caption{構成要素と構成要素間関連図}
\end{center}
\end{figure}

\newpage

\section{関数仕様}
ここでは使用する関数の仕様を示す。
\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{int} & \hspace{1.8in} main \hspace{1.8in} \\\hline\hline
      　 引数の型　 & 　引数の名前　 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{各機能を呼び出す。} \\
      \multicolumn{3}{|l|}{呼び出しに関しては、switch~case文で行う。} \\
      \multicolumn{3}{|l|}{正常に終了する際は、戻り値0(int型)を返す。} \\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

%add.c

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{void} & \hspace{1.8in} add\_adrb \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree * & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録を追加する処理を行う。create\_adrb,add\_nodeを呼出し、住所録を追加する。}\\
      \multicolumn{3}{|l|}{mainから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{void} & \hspace{1.8in} add\_node \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree ** & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタのポインタ} \\\hline
      struct tree * & new\_node & \multicolumn{1}{l|}{新規に追加するノードへのポインタ} \\\hline 
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録を管理する木へ新規ノードを追加する。再帰呼出しをすることで追加する位置を探索する。}\\
      \multicolumn{3}{|l|}{make\_tree,add\_adrbから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\newpage

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{struct adrb *} & \hspace{1.8in} create\_adrb \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      char * & name & \multicolumn{1}{l|}{追加する名前へのポインタ} \\\hline
      char * & posc & \multicolumn{1}{l|}{追加する郵便番号へのポインタ} \\\hline
      char * & adre & \multicolumn{1}{l|}{追加する住所へのポインタ} \\\hline
      char * & tell & \multicolumn{1}{l|}{追加する電話番号へのポインタ} \\\hline
      char * & mail & \multicolumn{1}{l|}{追加するメールアドレスへのポインタ} \\\hline
      int & count & \multicolumn{1}{l|}{履歴表示用のカウントの数値} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録のデータを作成する。作成したデータを返す}\\
      \multicolumn{3}{|l|}{make\_tree,add\_adrbから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

%delete.c

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{void} & \hspace{1.8in} delete\_adrb \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree ** & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタへのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録のレコードの削除の処理を行う。}\\
      \multicolumn{3}{|l|}{mainから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{struct tree *} & \hspace{1.8in} delete\_min \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree ** & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタへのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{delete\_adrbで削除時にノードの両方に子があった場合の処理。}\\
      \multicolumn{3}{|l|}{そのノードの子の最小値を探索する。そのノードへのポインタを返す。}\\
      \multicolumn{3}{|l|}{delete\_adrbから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

%list_adrb.c

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{void} & \hspace{1.8in} list\_adrb \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree * & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録の一覧を表示する処理。print\_adrb,up\_print,down\_printを呼び出す}\\
      \multicolumn{3}{|l|}{mainから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\newpage
%make_tree.c

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{struct tree *} & \hspace{1.8in} create\_node \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct adrb * & new\_adrb & \multicolumn{1}{l|}{新規住所録のデータへのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{木へ追加するための新たなノードを作成する。作成したノードへのポインタを返す。}\\
      \multicolumn{3}{|l|}{add\_adrbとmake\_treeから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{struct tree *} & \hspace{1.8in} make\_tree \hspace{1.8in} \\\hline\hline
      引数の型　 &  引数の名前　  & \multicolumn{1}{c|}{引数の役割}\\\hline 
      & & \multicolumn{1}{l|}{}\\\hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録を管理する木を作成する。add\_node,create\_nodeを呼出し木を作成する。作成した木へのポインタを返す。}\\
      \multicolumn{3}{|l|}{mainから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\newpage
%reference.c

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{struct adrb *} & \hspace{1.8in} reference\_adrb \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree ** & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタへのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録参照時の処理を行う。search\_adrbを呼出し参照を行う。参照したデータへのポインタを返す}\\
      \multicolumn{3}{|l|}{mainから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

%fix.c

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{void} & \hspace{1.8in} fix\_adrb \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree ** & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタへのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録の修正時の処理を行う。修正する住所録を見つけるためにreference\_adrbを呼び出す。}\\
      \multicolumn{3}{|l|}{fix\_itemを呼出し修正を行う。}\\
      \multicolumn{3}{|l|}{mainから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\newpage

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{void} & \hspace{1.8in} fix\_item \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct adrb * & data & \multicolumn{1}{l|}{修正するレコードへのポインタ} \\\hline
      char * & items & \multicolumn{1}{l|}{修正後のデータ} \\\hline
      int & item\_num & \multicolumn{1}{l|}{どの項目の修正を行うか指定する数値} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録の項目の修正を行う}\\
      \multicolumn{3}{|l|}{add\_adrbから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

%print.c

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{void} & \hspace{1.8in} print\_adrb \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree * & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{住所録の一覧表示を行う。}\\
      \multicolumn{3}{|l|}{main,fix\_adrb,delete\_adrbから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{void} & \hspace{1.8in} print\_history \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree * & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{履歴の一覧表示を行う。}\\
      \multicolumn{3}{|l|}{mainから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\newpage

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{void} & \hspace{1.8in} save\_file \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree * & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタ} \\\hline
      & & \\\hline \hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{木に読み込まれている住所録をファイルへ保存する。}\\
      \multicolumn{3}{|l|}{mainから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

%search.c

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{struct adrb *} & \hspace{1.8in} search\_adrb \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree * & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタ} \\\hline
      char * & key & \multicolumn{1}{l|}{検索キーへのポインタ} \\\hline
      int & items & \multicolumn{1}{l|}{どの項目で探索を行うかを指定する数値} \\\hline
      & & \multicolumn{1}{l|}{}\\\hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{検索キーに一致する項目を追加する。再帰呼出しをすることで検索を行う。}\\
      \multicolumn{3}{|l|}{発見したデータへのポインタを返す。}\\
      \multicolumn{3}{|l|}{reference\_adrbとfix\_adrbから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\newpage
%up_down.c

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{struct adrb *} & \hspace{1.8in} up\_print \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree * & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタ} \\\hline
      & & \multicolumn{1}{l|}{}\\\hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{昇順表示の処理を行う。}\\
      \multicolumn{3}{|l|}{list\_adrbから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\begin{table}[h]
  \begin{center}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{2}{|c|}{戻り値の型} & \multicolumn{1}{c|}{関数名}\\\hline
      \multicolumn{2}{|c|}{struct adrb *} & \hspace{1.8in} down\_print \hspace{1.8in} \\\hline\hline
      引数の型 & 引数の名前 & \multicolumn{1}{c|}{引数の役割}\\\hline 
      struct tree * & root & \multicolumn{1}{l|}{住所録を管理する木へのポインタ} \\\hline
      & & \multicolumn{1}{l|}{}\\\hline
      \multicolumn{3}{|c|}{関数の機能}\\\hline
      \multicolumn{3}{|l|}{降順表示の処理を行う。}\\
      \multicolumn{3}{|l|}{list\_adrbから呼び出される}\\
      \hline\hline
    \end{tabular}
  \end{center}
\end{table}

\newpage

\section{保存用ファイルで用いるレコードの書式}

保存用ファイルには、「adrb.dat」と言う名前のファイルを用意し、住所録の氏名、郵便番号、住所、電話番号、メールアドレス、履歴表示用の数値を記述する。各項目の区切りは任意個の空白でよいが項目中にスペースを含んではいけない。 氏名は「Iwate\_Taro」、 郵便番号は「0201234」、 住所は「Takizawa/Takizawa/Iwate」、 電話番号は「09012343772」あるいは「0295780228」、 メールアドレスは「Iwate@iwate-uc.jp」のように記述する。これらの項目を1行に1レコードとする。

\begin{figure}[h]
  \begin{center}
    \scalebox{.6}[.6]{\includegraphics{layout.eps}}
    \caption{保存用住所録の書式}
  \end{center}
\end{figure}

\newpage
※第一版からの変更点

保存用ファイルで用いるレコードの書式のところで、「履歴表示用の数値を記述する。」という記述を追加。


\end{document}
